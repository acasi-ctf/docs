<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating - Acasi CTF</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="developing.html"><strong aria-hidden="true">3.</strong> Developing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="developing_win.html"><strong aria-hidden="true">3.1.</strong> Windows</a></li><li class="chapter-item expanded "><a href="developing_mac.html"><strong aria-hidden="true">3.2.</strong> macOS</a></li></ol></li><li class="chapter-item expanded "><a href="challenges.html"><strong aria-hidden="true">4.</strong> Challenges</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="creating_challenges.html" class="active"><strong aria-hidden="true">4.1.</strong> Creating</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Acasi CTF</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="creating-challenges"><a class="header" href="#creating-challenges">Creating challenges</a></h1>
<p><strong>NOTE: This documentation is still a work-in-progress!</strong></p>
<p>This article covers the relevant knowledge on how to create a terminal-based challenge. It is
expected that the reader has some familiarity with Linux, Docker and Kubernetes. These skills will
be needed to effectively build, run, and troubleshoot any issues you may have during this process.</p>
<h2 id="building-a-container"><a class="header" href="#building-a-container">Building a container</a></h2>
<p>All challenge environments utilize at least one container running in Kubernetes. Because this
article assumes that the reader wants to create a terminal-based challenge (rather than a web-based
one), you will need to familiarize yourself with the penimage. The penimage is effectively a
preconfigured Docker image of which all of our terminal-based challenges derive from. It utilizes
an Ubuntu 20.04 LTS base. The reason it is recommended to use this is that it preinstalls an OpenSSH 
server with a start script that will inject the public key of the Termproxy microservice.</p>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<p>The following is an example of a simple container which adds some Python scripts.</p>
<pre><code class="language-dockerfile">FROM ghcr.io/acasi-ctf/ctf/penimage:latest

COPY challenges/ciphers/challenges/caesar-cipher/code/Caesar-cipher.py /home/player
COPY challenges/ciphers/challenges/comprehensive-challenge/code/Mixed-Challenge-1.py /home/player
COPY challenges/ciphers/challenges/letter-to-number/code/Letter-to-Number.py /home/player
COPY challenges/ciphers/challenges/morse-code/code/Morse_code.py /home/player
COPY challenges/ciphers/challenges/reverse-cipher/code/Reverse.py /home/player
</code></pre>
<p>As you may notice, the user that is used in the container is <strong>player</strong>, and their home directory is
located at <code>/home/player</code>.</p>
<h2 id="challenge-directory-structure"><a class="header" href="#challenge-directory-structure">Challenge directory structure</a></h2>
<p>To create a challenge set and children challenges, you must have a directory for that dedicated
challenge set. The directory structure might look something like below. Each file is annotated with
a brief comment describing briefly what it is.</p>
<pre><code>challenges/kali/challenge-set.json                           # Challenge set definition (JSON)
challenges/kali/challenges/strings/template.yaml             # Kubernetes CRD (YAML)
challenges/kali/challenges/strings/kubernetes.json           # Kubernetes provisioner (JSON)
challenges/kali/challenges/strings/challenge.json            # Challenge definition (JSON)
challenges/kali/challenges/strings/docs/StringsDocument.md   # Documentation (Markdown)
challenges/kali/challenges/strings/src/lock.cpp              # Source code for challenge (C++)
challenges/kali/challenges/binwalk/template.yaml             # Kubernetes CRD (YAML)
challenges/kali/challenges/binwalk/kubernetes.json           # Kubernetes provisioner (JSON)
challenges/kali/challenges/binwalk/challenge.json            # Challenge definition (JSON)
challenges/kali/challenges/binwalk/docs/BinwalkDocument.md   # Documentation (Markdown)
</code></pre>
<h2 id="challenge-set-definition"><a class="header" href="#challenge-set-definition">Challenge set definition</a></h2>
<p>A challenge set definition contains unique identifiers and human-readable descriptor fields. It also
links to each challenge by the name of the directory.</p>
<h3 id="fields"><a class="header" href="#fields">Fields</a></h3>
<table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>id</td><td>UUIDv4</td><td>Unique identifier for this challenge set. This MUST be unique amongst all other challenge sets and challenges.</td></tr>
<tr><td>slug</td><td>string</td><td>Unique slug name for this challenge set. This MUST be unique amongst all other challenge sets.</td></tr>
<tr><td>name</td><td>string</td><td>Descriptive name that is displayed in the user interface.</td></tr>
<tr><td>description</td><td>string</td><td>Description of this challenge set displayed in the user interface.</td></tr>
<tr><td>version</td><td>string</td><td>Version of this challenge.</td></tr>
<tr><td>challenges</td><td>array of string</td><td>Array of strings that reference each challenge directory to be included in this challenge set. Use lowercases and dashes for these names.</td></tr>
</tbody></table>
<h3 id="example-1"><a class="header" href="#example-1">Example</a></h3>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;4040a75a-037c-44c0-b1e2-bdcc6ceaddb0&quot;,
  &quot;slug&quot;: &quot;kali&quot;,
  &quot;name&quot;: &quot;Kali&quot;,
  &quot;description&quot;: &quot;Challenge set that focuses on Kali Linux&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;challenges&quot;: [
    &quot;strings&quot;,
    &quot;binwalk&quot;
  ]
}
</code></pre>
<h2 id="challenge-definition"><a class="header" href="#challenge-definition">Challenge definition</a></h2>
<p>A challenge definition contains unique identifiers, human-readable descriptor fields, and relevant
information required by the platform to build and start the environment.</p>
<h3 id="fields-1"><a class="header" href="#fields-1">Fields</a></h3>
<table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>id</td><td>UUIDv4</td><td>Unique identifier for this challenge. This MUST be unique amongst all other challenge sets and challenges.</td></tr>
<tr><td>slug</td><td>string</td><td>Unique slug name for this challenge. This MUST be unique amongst all other challenge.</td></tr>
<tr><td>name</td><td>string</td><td>Descriptive name that is displayed in the user interface.</td></tr>
<tr><td>description</td><td>string</td><td>Description of this challenge set displayed in the user interface.</td></tr>
<tr><td>provisioner</td><td>object</td><td>Object which contains field type, which can be either none or kubernetes. If kubernetes, kubernetes.json will be read as part of the provisioning process.</td></tr>
<tr><td>documentation</td><td>array of object</td><td>Array of objects which contain name and path fields, name is descriptive name for user interface and path is the path relative to the challenge.json file.</td></tr>
</tbody></table>
<h3 id="example-2"><a class="header" href="#example-2">Example</a></h3>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;0c73d010-b360-4116-ba6f-92dad43c3e57&quot;,
  &quot;slug&quot;: &quot;strings&quot;,
  &quot;name&quot;: &quot;strings&quot;,
  &quot;description&quot;: &quot;This is a challenge that demonstrates strings tool&quot;,
  &quot;provisioner&quot;: {
    &quot;type&quot;: &quot;kubernetes&quot;
  },
  &quot;documentation&quot;: [
    {
      &quot;name&quot;: &quot;StringsDocument&quot;,
      &quot;path&quot;: &quot;docs/StringsDocument.md&quot;
    }
  ]
}
</code></pre>
<h2 id="kubernetes-provisioner"><a class="header" href="#kubernetes-provisioner">Kubernetes provisioner</a></h2>
<p>A challenge which utilizes Kubernetes as a provisioning backend (currently the only one supported),
will require a kubernetes.json file in the same directory as challenge.json.</p>
<h3 id="fields-2"><a class="header" href="#fields-2">Fields</a></h3>
<table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td>templatePath</td><td>UUIDv4</td><td>Relative path to a YAML file containing the EnvironmentTemplate CRD for this challenge.</td></tr>
<tr><td>templateCRDVersion</td><td>string enum</td><td>Version of the template CRD. This currently only has one value, which is v1alpha1. This maps directly to the versions of the CRD in Kubernetes.</td></tr>
</tbody></table>
<h3 id="example-3"><a class="header" href="#example-3">Example</a></h3>
<pre><code class="language-json">{
  &quot;templatePath&quot;: &quot;template.yaml&quot;,
  &quot;templateCRDVersion&quot;: &quot;v1alpha1&quot;
}
</code></pre>
<h2 id="kubernetes-crd"><a class="header" href="#kubernetes-crd">Kubernetes CRD</a></h2>
<p>A challenge which utilizes Kubernetes as a provisioning backend will require this environment
template kind of resource. It combines the specs for one or more pods, and zero or more services and
ingresses.</p>
<h3 id="example-4"><a class="header" href="#example-4">Example</a></h3>
<pre><code class="language-yaml">apiVersion: ctf.acasi.info/v1alpha1
kind: EnvTemplate
metadata:
  name: kali-strings
spec:
  pods:
    - metadata:
        name: penimage
        labels:
          app: penimage
      spec:
        containers:
          - name: penimage
            image: ghcr.io/acasi-ctf/challenges/kali/strings:latest
  services:
    - metadata:
        name: penimage-termproxy
      spec:
        selector:
          app: penimage
        ports:
          - port: 22
            ctfExpose: Termproxy
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="challenges.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="challenges.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
